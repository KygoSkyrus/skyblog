<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="description"
      content="Responsive Bootstrap 4 Admin &amp; Dashboard Template"
    />
    <meta name="author" content="Bdtask" />
    <title>Beautiful Beginnings</title>
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/dist/img/favicon.png" />
    <!--Global Styles(used by all pages)-->
    <link
      href="assets/plugins/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="assets/plugins/metisMenu/metisMenu.min.css" rel="stylesheet" />
    <link href="assets/plugins/fontawesome/css/all.min.css" rel="stylesheet" />
    <link
      href="assets/plugins/typicons/src/typicons.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/plugins/themify-icons/themify-icons.min.css"
      rel="stylesheet"
    />
    <!--Third party Styles(used by this page)-->
    <link href="assets/plugins/glyphicons/glyphicons.css" rel="stylesheet" />
    <!--Third party Styles(used by this page)-->
    <link href="assets/plugins/summernote/summernote.css" rel="stylesheet" />
    <link
      href="assets/plugins/summernote/summernote-bs4.css"
      rel="stylesheet"
    />
    <!--Third party Styles(used by this page)-->
    <link
      href="assets/plugins/datatables/dataTables.bootstrap4.min.css"
      rel="stylesheet"
    />

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <!--Start Your Custom Style Now-->
    <link href="assets/dist/css/style.css" rel="stylesheet" />

    <style>
      .note-editor {
        z-index: 0;
      }
    </style>
  </head>
  <body class="fixed">
    <!-- Page Loader -->
    <div class="page-loader-wrapper">
      <div class="loader">
        <div class="preloader">
          <div class="spinner-layer pl-green">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
        </div>
        <p>Please wait...</p>
      </div>
    </div>
    <!-- #END# Page Loader -->

    <!-- Modal -->
    <div
      class="modal fade"
      id="change"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Change Password</h5>
            <button
              type="button"
              id="close"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
              style="
                background-color: inherit;
                border: none;
                outline: none;
                cursor: pointer;
              "
            >
              X
            </button>
          </div>
          <div class="modal-body">
            <div
              class="d-flex align-items-center justify-content-center text-center"
            >
              <div class="form-wrapper m-auto" style="width: 100%">
                <div class="form-container my-4" style="max-width: unset">
                  <div class="panel" style="border: none; box-shadow: none">
                    <form class="register-form">
                      <div class="form-group">
                        <input
                          type="text"
                          class="form-control"
                          id="uname"
                          placeholder="username"
                        />
                      </div>
                      <div class="form-group">
                        <input
                          type="password"
                          class="form-control"
                          id="password"
                          placeholder="Old Password"
                        />
                      </div>
                      <div class="form-group">
                        <input
                          type="password"
                          class="form-control"
                          id="newPassword"
                          placeholder="New Password"
                        />
                      </div>
                      <section
                        class="btn btn-success btn-block"
                        onclick="cpswrd()"
                      >
                        Change password
                      </section>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="wrapper">
      <!-- Sidebar  -->
      <nav class="sidebar sidebar-bunker">
        <!-- <div class="sidebar-header">
          <a href="index.html" class="logo "
            ><img src="../assets/images/Beautiful-Beginnings.png" height="60px" alt=""
          /> Beautiful Beginnings</a>
        </div> -->
        <!--/.sidebar header-->
        <div class="profile-element d-flex align-items-center flex-shrink-0">
          <div class="avatar online">
            <img
              src="assets/dist/img/avatar5.png"
              class="img-fluid rounded-circle"
              alt=""
            />
          </div>
          <div class="profile-text">
            <h6 class="m-0">Admin</h6>
            <!-- <span
              ><a
                href="cdn-cgi/l/email-protection.html"
                class="__cf_email__"
                data-cfemail="305548515d405c5570575d51595c1e535f5d"
                >[email&#160;protected]</a
              ></span
            > -->
          </div>
        </div>
        <!--/.profile element-->

        <div class="sidebar-body">
          <nav class="sidebar-nav">
            <ul class="metismenu">
              <li class="nav-label">Main Menu</li>
              <!-- <li>
                <a class="has-arrow material-ripple" href="#">
                  <i class="typcn typcn-home-outline mr-2"></i>
                  Dashboard
                </a>
              </li> -->

              <li class="">
                <a
                  class="material-ripple"
                  href="/blogs-management"
                  style="color: #fff; "
                >
                  <i class="typcn typcn-clipboard mr-2"></i>
                  Blogs
                </a>
              </li>
              <li class="mm-active">
                <a
                  class="material-ripple"
                  href="/messages"
                  style="color: #fff;"
                >
                  <i class="typcn typcn-clipboard mr-2"></i>
                  Messages
                </a>
              </li>
            </ul>
          </nav>
        </div>
        <!-- sidebar-body -->
      </nav>
      <!-- Page Content  -->
      <div class="content-wrapper">
        <div class="main-content">
          <nav class="navbar-custom-menu navbar navbar-expand-lg m-0">
            <div class="sidebar-toggle-icon" id="sidebarCollapse">
              sidebar toggle<span></span>
            </div>
            <!--/.sidebar toggle icon-->
            <div class="d-flex flex-grow-1">
              <ul class="navbar-nav flex-row align-items-center ml-auto">
                <li class="nav-item dropdown user-menu">
                  <a
                    class="nav-link dropdown-toggle"
                    href="#"
                    data-toggle="dropdown"
                  >
                    <!--<img src="assets/dist/img/user2-160x160.png" alt="">-->
                    <i class="typcn typcn-user-add-outline"></i>
                  </a>
                  <div class="dropdown-menu dropdown-menu-right">
                    <div class="dropdown-header d-sm-none">
                      <a href="#" class="header-arrow"
                        ><i class="icon ion-md-arrow-back"></i
                      ></a>
                    </div>
                    <div class="user-header">
                      <div class="img-user">
                        <img src="assets/dist/img/avatar5.png" alt="" />
                      </div>
                      <!-- img-user -->
                      <h6>Admin</h6>
                      <!-- <span
                        ><a
                          href="cdn-cgi/l/email-protection.html"
                          class="__cf_email__"
                          data-cfemail="1a7f627b776a767f5a7d777b737634797577"
                          >[email&#160;protected]</a
                        ></span> -->
                    </div>
                    <!-- user-header -->
                    <span
                      class="dropdown-item"
                      data-bs-toggle="modal"
                      data-bs-target="#change"
                      style="cursor: pointer"
                      ><i class="typcn typcn-edit"></i> Change Password</span
                    >
                    <a href="#" onclick="logout()" class="dropdown-item"
                      ><i class="typcn typcn-key-outline"></i> Sign Out</a
                    >
                  </div>
                  <!--/.dropdown-menu -->
                </li>
              </ul>
              <!--/.navbar nav-->
              <div class="nav-clock">
                <div class="time">
                  <span class="time-hours"></span>
                  <span class="time-min"></span>
                  <span class="time-sec"></span>
                </div>
              </div>
              <!-- nav-clock -->
            </div>
          </nav>
          <!--/.navbar-->
          

          <div class="body-content">

            <div class="card mb-4">
              <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <h6 class="fs-17 font-weight-600 mb-0">Posted Blogs</h6>
                  </div>
                  <div class="text-right">
                    <div class="actions">
                      <a href="" class="action-item" onclick="function fun(){location.reload()}"
                        ><i class="ti-reload"></i
                      ></a>
                    </div>
                  </div>
                </div>
              </div>

              <style>
                #tbody button {
                  border: none;
                  outline: none;
                  padding: 0px;
                  width: 32px;
                  height: 32px;
                  border-radius: 4px;
                  margin: 0 4px;
                  color: white;
                  cursor: pointer;
                }
              </style>

              <div class="card-body">
                <div class="table-responsive">
                  <table
                    class="table display table-bordered table-striped table-hover column-rendering"
                  >
                    <thead>
                      <tr>
                        <th>S. No.</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone No.</th>
                        <th>Address</th>
                        <th>Message</th>
                        <th>Delete</th>
                      </tr>
                    </thead>
                    <tbody id="tbody"></tbody>
                  </table>
                </div>
              </div>
            </div>
            <!--Page length options-->
          </div>
          <!--/.body content-->
        </div>
        <!--/.main content-->
        <!--/.footer content-->
        <div class="overlay"></div>
      </div>
      <!--/.wrapper-->
    </div>
    <!--Global script(used by all pages)-->

    <script>
      window.onload = async function () {
        const res = await fetch("/messages", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({}),
        });

        const data = await res.json();
        console.log(data);

        let html = "";
        for (var i = 0; i < data.length; i++) {
          html += `<tr>
                                <td>${i + 1}</td>
                                <td>${data[i].name}</td>
                                <td>${data[i].email}</td>
                                <td>${data[i].phone}</td>
                                <td>${data[i].address}</td>
                                <td>${data[i].note}</td>
                            
                                <td style="display: flex;border: none;justify-content: center;"><button onclick='deleteBlog(${data[i].id})' style="background: #d50606;"><i class="fa fa-trash" ></i></button></td>
                            </tr>`;
        }

        document.getElementById("tbody").innerHTML = html;
      };
    </script>

<script>
    async function deleteBlog(id) {
      console.log(id);
      const res = await fetch("/deletemsg", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          id
        }),
      });

      const data = await res.json();
      console.log(data);
      if(data.affectedRows>0){
          location.reload()
      }
    }
  </script>
  

    <script>
      async function cpswrd() {
        console.log("cpswrd function ran");

        const uname = document.getElementById("uname").value;
        const password = document.getElementById("password").value;
        const newPassword = document.getElementById("newPassword").value;
        console.log(uname, password, newPassword);

        const res = await fetch("/cpswrd", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            uname,
            password,
            newPassword,
          }),
        });

        const data = await res.json();
        if (data.message == "changed") {
          alert("Password changed successfully!");
          document.getElementById("password").value = "";
          document.getElementById("newPassword").value = "";
          document.getElementById("close").click();
        }
      }
    </script>

    <script>
      async function logout() {
        console.log("logout function ran");
        const res = await fetch("/logout", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({}),
        });

        const data = await res.json();
        console.log(data);
      }
    </script>

    <script
      data-cfasync="false"
      src="cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"
    ></script>
    <script src="assets/plugins/jQuery/jquery-3.4.1.min.js"></script>
    <script src="assets/dist/js/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/plugins/metisMenu/metisMenu.min.js"></script>
    <script src="assets/plugins/perfect-scrollbar/dist/perfect-scrollbar.min.js"></script>
    <!-- Third Party Scripts(used by this page)-->
    <script src="assets/plugins/summernote/summernote.min.js"></script>
    <script src="assets/plugins/summernote/summernote-bs4.min.js"></script>
    <!-- Third Party Scripts(used by this page)-->
    <script src="assets/plugins/datatables/dataTables.min.js"></script>
    <script src="assets/plugins/datatables/dataTables.bootstrap4.min.js"></script>
    <!--Page Active Scripts(used by this page)-->
    <!-- <script src="assets/plugins/datatables/data-advanced.active.js"></script> -->
    <!--Page Active Scripts(used by this page)-->
    <script src="assets/dist/js/pages/forms-basic.active.js"></script>
    <!--Page Active Scripts(used by this page)-->
    <script src="assets/plugins/summernote/summernote.active.js"></script>

    <!--Page Scripts(used by all page)-->
    <script src="assets/dist/js/sidebar.js"></script>
  </body>

  <!-- Mirrored from bhulua.thememinister.com/forms_input_group.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Jul 2021 09:49:25 GMT -->
</html>
